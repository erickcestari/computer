import{w as le,s as q,e as C,c as R,K as j,p as T,i as H,P as ee,n as I,f as E,Q as te,L as ie,a as N,b as V,g as O,R as M,h as L,M as ce,N as re,O as fe,o as ue,r as ne,l as S,S as ae}from"../chunks/scheduler.BWFPlQQj.js";import{t as D,a as W,S as P,i as U,b as x,d as F,m as K,g as se,c as oe,e as Q}from"../chunks/index.BzKN3HsP.js";function G(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function he(o,e){D(o,1,1,()=>{e.delete(o.key)})}function me(o,e,t,u,n,r,c,h,d,i,s,m){let w=o.length,b=r.length,l=w;const p={};for(;l--;)p[o[l].key]=l;const _=[],z=new Map,Y=new Map,A=[];for(l=b;l--;){const g=m(n,r,l),v=t(g);let y=c.get(v);y?A.push(()=>y.p(g,e)):(y=i(v,g),y.c()),z.set(v,_[l]=y),v in p&&Y.set(v,Math.abs(l-p[v]))}const f=new Set,a=new Set;function k(g){W(g,1),g.m(h,s),c.set(g.key,g),s=g.first,b--}for(;w&&b;){const g=_[b-1],v=o[w-1],y=g.key,B=v.key;g===v?(s=g.first,w--,b--):z.has(B)?!c.has(y)||f.has(y)?k(g):a.has(B)?w--:Y.get(y)>Y.get(B)?(a.add(y),k(g)):(f.add(B),w--):(d(v,c),w--)}for(;w--;){const g=o[w];z.has(g.key)||d(g,c)}for(;b;)k(_[b-1]);return le(A),_}const pe=""+new URL("../assets/paint.CEF0hcsR.png",import.meta.url).href;function de(o){let e,t=`<img src="${pe}" alt="App Icon" class="svelte-1h0h9z9"/> <p class="svelte-1h0h9z9">Paint</p>`,u,n;return{c(){e=C("button"),e.innerHTML=t,this.h()},l(r){e=R(r,"BUTTON",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-1095kxa"&&(e.innerHTML=t),this.h()},h(){T(e,"class","app-icon svelte-1h0h9z9")},m(r,c){H(r,e,c),u||(n=ee(e,"click",o[0]),u=!0)},p:I,i:I,o:I,d(r){r&&E(e),u=!1,n()}}}function ge(o){const e=te();function t(){e("openWindow")}return[t]}class _e extends P{constructor(e){super(),U(this,e,ge,de,q,{})}}function we(o){let e,t,u,n='<p class="svelte-1qguz1h">Paint</p>',r,c,h="x",d,i,s,m,w;const b=o[7].default,l=ie(b,o,o[6],null);return{c(){e=C("div"),t=C("div"),u=C("div"),u.innerHTML=n,r=N(),c=C("button"),c.textContent=h,d=N(),i=C("div"),l&&l.c(),this.h()},l(p){e=R(p,"DIV",{class:!0});var _=V(e);t=R(_,"DIV",{class:!0});var z=V(t);u=R(z,"DIV",{"data-svelte-h":!0}),j(u)!=="svelte-lb3e6t"&&(u.innerHTML=n),r=O(z),c=R(z,"BUTTON",{class:!0,"data-svelte-h":!0}),j(c)!=="svelte-1lf22e8"&&(c.textContent=h),z.forEach(E),d=O(_),i=R(_,"DIV",{class:!0});var Y=V(i);l&&l.l(Y),Y.forEach(E),_.forEach(E),this.h()},h(){T(c,"class","close-button svelte-1qguz1h"),T(t,"class","bar svelte-1qguz1h"),T(i,"class","content svelte-1qguz1h"),T(e,"class","window svelte-1qguz1h"),M(e,"drag-cursor",o[0]),M(e,"resize-cursor",o[1]),M(e,"resize-top-left",o[2]==="top-left"),M(e,"resize-top-right",o[2]==="top-right"),M(e,"resize-bottom-left",o[2]==="bottom-left"),M(e,"resize-bottom-right",o[2]==="bottom-right")},m(p,_){H(p,e,_),L(e,t),L(t,u),L(t,r),L(t,c),L(e,d),L(e,i),l&&l.m(i,null),o[8](e),s=!0,m||(w=ee(c,"click",o[4]),m=!0)},p(p,[_]){l&&l.p&&(!s||_&64)&&ce(l,b,p,p[6],s?fe(b,p[6],_,null):re(p[6]),null),(!s||_&1)&&M(e,"drag-cursor",p[0]),(!s||_&2)&&M(e,"resize-cursor",p[1]),(!s||_&4)&&M(e,"resize-top-left",p[2]==="top-left"),(!s||_&4)&&M(e,"resize-top-right",p[2]==="top-right"),(!s||_&4)&&M(e,"resize-bottom-left",p[2]==="bottom-left"),(!s||_&4)&&M(e,"resize-bottom-right",p[2]==="bottom-right")},i(p){s||(W(l,p),s=!0)},o(p){D(l,p),s=!1},d(p){p&&E(e),l&&l.d(p),o[8](null),m=!1,w()}}}const be=30,X=20;function ke(o,e,t){let{$$slots:u={},$$scope:n}=e,{desktopElement:r}=e;const c=te();let h=!1,d=!1,i=null,s=0,m=0,w=0,b=0,l;function p(f){const a=l.getBoundingClientRect();f.clientX>a.right-X&&f.clientY>a.bottom-X?(t(1,d=!0),t(2,i="bottom-right"),w=a.width,b=a.height,s=f.clientX,m=f.clientY):f.clientX<a.left+X&&f.clientY<a.top+X?(t(1,d=!0),t(2,i="top-left"),w=a.width,b=a.height,s=f.clientX,m=f.clientY):f.clientX>a.right-X&&f.clientY<a.top+X?(t(1,d=!0),t(2,i="top-right"),w=a.width,b=a.height,s=f.clientX,m=f.clientY):f.clientX<a.left+X&&f.clientY>a.bottom-X?(t(1,d=!0),t(2,i="bottom-left"),w=a.width,b=a.height,s=f.clientX,m=f.clientY):f.clientY<a.top+be?(t(0,h=!0),s=f.clientX-a.left,m=f.clientY-a.top):t(2,i=null)}function _(f){if(h){const a=r.getBoundingClientRect(),k=l.getBoundingClientRect(),g=f.clientX-s,v=f.clientY-m;g>=a.left&&g+k.width<=a.right&&v>=a.top&&v+k.height<=a.bottom&&(t(3,l.style.left=`${g}px`,l),t(3,l.style.top=`${v}px`,l))}if(d&&i){let a,k;switch(i){case"bottom-right":a=Math.max(w+(f.clientX-s),100),k=Math.max(b+(f.clientY-m),100);break;case"bottom-left":a=Math.max(w-(f.clientX-s),100),k=Math.max(b+(f.clientY-m),100),t(3,l.style.left=`${f.clientX}px`,l);break;case"top-right":a=Math.max(w+(f.clientX-s),100),k=Math.max(b-(f.clientY-m),100),t(3,l.style.top=`${f.clientY}px`,l);break;case"top-left":a=Math.max(w-(f.clientX-s),100),k=Math.max(b-(f.clientY-m),100),t(3,l.style.left=`${f.clientX}px`,l),t(3,l.style.top=`${f.clientY}px`,l);break;default:return}const g=r.getBoundingClientRect();a=Math.min(a,g.right-l.offsetLeft),k=Math.min(k,g.bottom-l.offsetTop),t(3,l.style.width=`${a}px`,l),t(3,l.style.height=`${k}px`,l)}}function z(){t(0,h=!1),t(1,d=!1),t(2,i=null)}function Y(){c("close")}ue(()=>(l.addEventListener("mousedown",p),document.addEventListener("mousemove",_),document.addEventListener("mouseup",z),t(3,l.style.left=`${Math.random()*(r.clientWidth-200)+200}px`,l),t(3,l.style.top=`${Math.random()*(r.clientHeight-250)}px`,l),()=>{l.removeEventListener("mousedown",p),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",z)}));function A(f){ne[f?"unshift":"push"](()=>{l=f,t(3,l)})}return o.$$set=f=>{"desktopElement"in f&&t(5,r=f.desktopElement),"$$scope"in f&&t(6,n=f.$$scope)},[h,d,i,l,Y,r,n,u,A]}class ve extends P{constructor(e){super(),U(this,e,ke,we,q,{desktopElement:5})}}function J(o,e,t){const u=o.slice();return u[6]=e[t],u}function Z(o){let e,t;function u(){return o[4](o[6])}return e=new ve({props:{desktopElement:o[1]}}),e.$on("close",u),{c(){x(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){o=n;const c={};r&2&&(c.desktopElement=o[1]),e.$set(c)},i(n){t||(W(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function $(o,e){let t,u=e[6].id,n,r,c=Z(e);return{key:o,first:null,c(){t=S(),c.c(),n=S(),this.h()},l(h){t=S(),c.l(h),n=S(),this.h()},h(){this.first=t},m(h,d){H(h,t,d),c.m(h,d),H(h,n,d),r=!0},p(h,d){e=h,d&1&&q(u,u=e[6].id)?(se(),D(c,1,1,I),oe(),c=Z(e),c.c(),W(c,1),c.m(n.parentNode,n)):c.p(e,d)},i(h){r||(W(c),r=!0)},o(h){D(c),r=!1},d(h){h&&(E(t),E(n)),c.d(h)}}}function Me(o){let e,t,u,n=[],r=new Map,c;t=new _e({}),t.$on("openWindow",o[2]);let h=G(o[0]);const d=i=>i[6].id;for(let i=0;i<h.length;i+=1){let s=J(o,h,i),m=d(s);r.set(m,n[i]=$(m,s))}return{c(){e=C("div"),x(t.$$.fragment),u=N();for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=R(i,"DIV",{class:!0});var s=V(e);F(t.$$.fragment,s),u=O(s);for(let m=0;m<n.length;m+=1)n[m].l(s);s.forEach(E),this.h()},h(){T(e,"class","desktop svelte-1wmj75x")},m(i,s){H(i,e,s),K(t,e,null),L(e,u);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(e,null);o[5](e),c=!0},p(i,[s]){s&11&&(h=G(i[0]),se(),n=me(n,s,d,1,i,h,r,e,he,$,null,J),oe())},i(i){if(!c){W(t.$$.fragment,i);for(let s=0;s<h.length;s+=1)W(n[s]);c=!0}},o(i){D(t.$$.fragment,i);for(let s=0;s<n.length;s+=1)D(n[s]);c=!1},d(i){i&&E(e),Q(t);for(let s=0;s<n.length;s+=1)n[s].d();o[5](null)}}}function Ee(o,e,t){let u=[],n;function r(){t(0,u=[...u,{id:Date.now()}])}function c(i){t(0,u=u.filter(s=>s.id!==i))}const h=i=>c(i.id);function d(i){ne[i?"unshift":"push"](()=>{n=i,t(1,n)})}return[u,n,r,c,h,d]}class ze extends P{constructor(e){super(),U(this,e,Ee,Me,q,{})}}function ye(o){let e,t,u,n;return u=new ze({}),{c(){e=C("meta"),t=N(),x(u.$$.fragment),this.h()},l(r){const c=ae("svelte-t32ptj",document.head);e=R(c,"META",{name:!0,content:!0}),c.forEach(E),t=O(r),F(u.$$.fragment,r),this.h()},h(){document.title="Home",T(e,"name","description"),T(e,"content","Svelte demo app")},m(r,c){L(document.head,e),H(r,t,c),K(u,r,c),n=!0},p:I,i(r){n||(W(u.$$.fragment,r),n=!0)},o(r){D(u.$$.fragment,r),n=!1},d(r){r&&E(t),E(e),Q(u,r)}}}class Le extends P{constructor(e){super(),U(this,e,null,ye,q,{})}}export{Le as component};
